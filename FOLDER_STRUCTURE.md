# Folder Structure

## Overview

The `code_pageindex` project is now organized into clear, logical folders:

```
code_pageindex/
â”œâ”€â”€ README.md                    # Main documentation
â”œâ”€â”€ QUICK_START.md              # Quick start guide
â”œâ”€â”€ FOLDER_STRUCTURE.md         # This file
â”œâ”€â”€ .env                        # Environment variables (API keys)
â”‚
â”œâ”€â”€ src/                        # Source code
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ distributed_models.py  # Data models (Pydantic)
â”‚   â”œâ”€â”€ distributed_indexer.py # Indexer implementation
â”‚   â””â”€â”€ distributed_agent.py   # Agent implementation
â”‚
â”œâ”€â”€ scripts/                    # Executable scripts
â”‚   â”œâ”€â”€ run_distributed_indexer.py  # Index a repository
â”‚   â””â”€â”€ run_distributed_agent.py    # Query the index
â”‚
â”œâ”€â”€ docs/                       # Documentation
â”‚   â”œâ”€â”€ HIERARCHICAL_INDEX.md          # Hierarchical structure explanation
â”‚   â”œâ”€â”€ PERFORMANCE_OPTIMIZATION.md    # Performance improvements
â”‚   â”œâ”€â”€ AGENT_UPDATE.md                # Agent integration guide
â”‚   â”œâ”€â”€ OPTIMIZATION_SUMMARY.md        # Summary of optimizations
â”‚   â”œâ”€â”€ DISTRIBUTED_INDEX_EXPLAINED.md # Detailed index explanation
â”‚   â”œâ”€â”€ DISTRIBUTED_INDEX.md           # Index overview
â”‚   â”œâ”€â”€ DISTRIBUTED_VS_MONOLITHIC.md   # Architecture comparison
â”‚   â”œâ”€â”€ AGENT_COMPARISON.md            # Agent comparison
â”‚   â””â”€â”€ SUMMARY.md                     # Project summary
â”‚
â”œâ”€â”€ output/                     # Generated index files
â”‚   â””â”€â”€ distributed_index/     # Hierarchical index structure
â”‚       â”œâ”€â”€ repo_index.json    # Repository metadata
â”‚       â”œâ”€â”€ index.json         # Root directory index
â”‚       â””â”€â”€ src/               # Mirrors code structure
â”‚           â””â”€â”€ ...
â”‚
â”œâ”€â”€ repo/                       # Source repositories to index
â”‚   â””â”€â”€ openai-python/         # Example repository
â”‚
â””â”€â”€ examples/                   # Example scripts (future)
```

## Folder Descriptions

### ğŸ“ `src/` - Source Code

Contains the core implementation:

- **`distributed_models.py`** - Pydantic data models
  - `FileMetadata`, `DirectoryIndex`, `RepositoryIndex`
  - `CodeElementMetadata`, `SubdirectoryReference`
  
- **`distributed_indexer.py`** - Indexer implementation
  - `DistributedCodeIndexer` class
  - AST parsing, summary generation
  - Parallel processing, caching
  
- **`distributed_agent.py`** - Agent implementation
  - `DistributedCodeAgent` class
  - LangGraph-based reasoning
  - Bash tool for index navigation

### ğŸ“œ `scripts/` - Executable Scripts

Ready-to-run scripts:

- **`run_distributed_indexer.py`** - Index a repository
  ```bash
  python scripts/run_distributed_indexer.py
  ```

- **`run_distributed_agent.py`** - Query the index
  ```bash
  python scripts/run_distributed_agent.py
  ```

### ğŸ“š `docs/` - Documentation

Comprehensive documentation:

- **`HIERARCHICAL_INDEX.md`** - How the hierarchical structure works
- **`PERFORMANCE_OPTIMIZATION.md`** - Performance improvements (7.5x faster)
- **`AGENT_UPDATE.md`** - Agent integration with hierarchical index
- **`OPTIMIZATION_SUMMARY.md`** - Summary of all optimizations
- **`DISTRIBUTED_INDEX_EXPLAINED.md`** - Deep dive into index structure
- **`DISTRIBUTED_VS_MONOLITHIC.md`** - Architecture comparison
- **`AGENT_COMPARISON.md`** - Comparison of different agent approaches

### ğŸ“¤ `output/` - Generated Files

Index files generated by the indexer:

- **`distributed_index/`** - Hierarchical index structure
  - Mirrors the code repository structure
  - Each directory has `index.json`
  - `repo_index.json` at root

### ğŸ“¦ `repo/` - Source Repositories

Repositories to be indexed:

- **`openai-python/`** - Example repository (OpenAI Python SDK)
- Add your own repositories here

### ğŸ¯ `examples/` - Examples (Future)

Example scripts and use cases (to be added)

## Quick Navigation

### To Index a Repository

```bash
cd /Users/dongqiuyepu/Desktop/code/python/pydantic-agent/code_pageindex
python scripts/run_distributed_indexer.py
```

### To Query the Index

```bash
python scripts/run_distributed_agent.py
```

### To Read Documentation

```bash
# Quick start
cat QUICK_START.md

# Hierarchical structure
cat docs/HIERARCHICAL_INDEX.md

# Performance details
cat docs/PERFORMANCE_OPTIMIZATION.md
```

## File Locations

### Configuration

- **`.env`** - API keys and configuration (root level)

### Main Documentation

- **`README.md`** - Main project documentation (root level)
- **`QUICK_START.md`** - Quick start guide (root level)
- **`FOLDER_STRUCTURE.md`** - This file (root level)

### Source Code

- **`src/distributed_models.py`** - Data models
- **`src/distributed_indexer.py`** - Indexer
- **`src/distributed_agent.py`** - Agent

### Scripts

- **`scripts/run_distributed_indexer.py`** - Indexing script
- **`scripts/run_distributed_agent.py`** - Agent script

### Output

- **`output/distributed_index/`** - Generated index files

## Import Paths

### From Scripts

```python
# Add parent directory to path
sys.path.insert(0, os.path.join(os.path.dirname(__file__), '..'))

# Import from src
from src.distributed_indexer import DistributedCodeIndexer
from src.distributed_agent import create_distributed_agent
from src.distributed_models import RepositoryIndex
```

### From Source Files

```python
# Import from same package
from src.distributed_models import FileMetadata, DirectoryIndex
```

## Benefits of This Structure

### âœ… Clear Organization

- Source code in `src/`
- Scripts in `scripts/`
- Documentation in `docs/`
- Output in `output/`

### âœ… Easy Navigation

- Know exactly where to find things
- Logical folder hierarchy
- Consistent naming

### âœ… Scalability

- Easy to add new scripts
- Easy to add new documentation
- Easy to add new source files

### âœ… Professional Structure

- Follows Python best practices
- Similar to popular open-source projects
- Easy for others to understand

## Migration Notes

### Old Structure

```
code_pageindex/
â”œâ”€â”€ distributed_indexer.py
â”œâ”€â”€ distributed_agent.py
â”œâ”€â”€ distributed_models.py
â”œâ”€â”€ run_distributed_indexer.py
â”œâ”€â”€ run_distributed_agent.py
â”œâ”€â”€ HIERARCHICAL_INDEX.md
â”œâ”€â”€ PERFORMANCE_OPTIMIZATION.md
â”œâ”€â”€ distributed_index/
â””â”€â”€ ...
```

### New Structure

```
code_pageindex/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ distributed_indexer.py
â”‚   â”œâ”€â”€ distributed_agent.py
â”‚   â””â”€â”€ distributed_models.py
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ run_distributed_indexer.py
â”‚   â””â”€â”€ run_distributed_agent.py
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ HIERARCHICAL_INDEX.md
â”‚   â”œâ”€â”€ PERFORMANCE_OPTIMIZATION.md
â”‚   â””â”€â”€ ...
â””â”€â”€ output/
    â””â”€â”€ distributed_index/
```

### What Changed

1. **Source files** moved to `src/`
2. **Scripts** moved to `scripts/`
3. **Documentation** moved to `docs/`
4. **Output** moved to `output/`
5. **Import paths** updated in all files

## Summary

The new folder structure is:

- âœ… **Clearer** - Easy to understand at a glance
- âœ… **More organized** - Logical grouping of files
- âœ… **More professional** - Follows best practices
- âœ… **More scalable** - Easy to extend

All scripts and imports have been updated to work with the new structure!
